import{g as N,A as T,w as I,h as p,a6 as k,_ as S,a as D,$ as H,ag as L,b as l,f,a8 as i,e as a,c as d,L as _,aD as C,ab as j,aa as v,t as q,a9 as b,aC as P,d as $,ac as A,ae as E,aH as z,aI as F}from"./index-BOUM_9ip.js";import{H as y}from"./Precode.vue_vue_type_style_index_1_lang-DYNIEY68.js";import{_ as J}from"./DialogModel-D-VYp-jN.js";var B=N({props:{code:{type:String,required:!0},language:{type:String,default:""},autodetect:{type:Boolean,default:!0},ignoreIllegals:{type:Boolean,default:!0}},setup:function(t){var o=T(t.language);I(function(){return t.language},function(e){o.value=e});var h=p(function(){return t.autodetect||!o.value}),c=p(function(){return!h.value&&!y.getLanguage(o.value)});return{className:p(function(){return c.value?"":"hljs "+o.value}),highlightedCode:p(function(){var e;if(c.value)return console.warn('The language "'+o.value+'" you specified could not be found.'),t.code.replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;").replace(/"/g,"&quot;").replace(/'/g,"&#x27;");if(h.value){var u=y.highlightAuto(t.code);return o.value=(e=u.language)!==null&&e!==void 0?e:"",u.value}return(u=y.highlight(t.code,{language:o.value,ignoreIllegals:t.ignoreIllegals})).value})}},render:function(){return k("pre",{},[k("code",{class:this.className,innerHTML:this.highlightedCode})])}}),M={install:function(t){t.component("highlightjs",B)},component:B};const R={key:0,class:"Precode"},U={key:0,class:"error-message"},G={class:"content"},K={__name:"Precode",props:{url:{type:String,required:!0}},setup(t){const o=M.component;D();const c=t.url.split(",").map(r=>r.trim()),e=H({dialog:!1,codes:[],tab:0,error:null});c.forEach(async(r,n)=>{L.isDev||(r=r.replace(/^[^\/]*\/[^\/]*\//,""));let m=await $get_raw(r);e.codes[n]=m.replace(/.*(?:import Precode |<Precode ).*\r?\n/g,"")});function u(){e.dialog=!0}function w(){e.dialog=!1}return(r,n)=>{const m=E,V=z,x=F;return l(),f(C,null,{default:i(()=>[a(e).codes.length||a(e).error?(l(),d("div",R,[_(C,null,{default:i(()=>[_(m,{theme:a(e).dialog?"success":"primary",class:"PrecodeBtn",onClick:u},{default:i(()=>n[1]||(n[1]=[j(" 源码")])),_:1},8,["theme"])]),_:1}),_(J,{class:"PrecodeDialog",visible:a(e).dialog,attach_to_body:"",close_easy:"",t_dialog:{width:800,header:"源码",onClose:w}},{default:i(()=>[v(` <template #header>\r
				<div>源码</div>\r
			</template> `),a(e).error?(l(),d("div",U,q(a(e).error),1)):(l(),d(b,{key:1},[a(e).codes.length>1?(l(),f(x,{key:0,modelValue:a(e).tab,"onUpdate:modelValue":n[0]||(n[0]=g=>a(e).tab=g),theme:"card"},{default:i(()=>[(l(!0),d(b,null,P(a(e).codes,(g,s)=>(l(),f(V,{key:s,value:s,label:a(c)[s].split("/").pop()},null,8,["value","label"]))),128))]),_:1},8,["modelValue"])):v("v-if",!0),$("div",G,[(l(!0),d(b,null,P(a(e).codes,(g,s)=>(l(),f(a(o),{key:s,class:A({hide:a(e).tab!=s}),code:g,theme:"dark"},null,8,["class","code"]))),128))])],64))]),_:1},8,["visible","t_dialog"])])):v("v-if",!0)]),_:1})}}},X=S(K,[["__scopeId","data-v-ebac1bf3"]]);export{X as P};
